# Тестовое задание на проект SEMrush Projects

Необходимо написать два RESTfull микросервиса, синхронизирующих между собой некие метаданные проектов. 

## Master
Первый микросервис (master) хранит эталонное состояние, слушает порт 8080. При старте принимает список портов слейвов, на которые будет рассылать данные.

По маршруту **POST http://localhost:8080/projects/{id}/data/{textData}/** мастер сохраняет у себя и инициирует отправку метаданных (textData) всем слейвам.
Если случилась ошибка при отправке слейву, запрос должен быть повторен через некоторое время (на ваше усмотрение).
Повторяем бесконечное количество раз, с увеличивающимся интервалом. Версия проекта при создании равна 1. Каждый апдейт ее атомарно инкрементит.

По маршруту **GET http://localhost:8080/projects/**, он возвращает все имеющиеся проекты:
```
[
  {
    "id": Number, 
    "version": Number, 
    "data": String
  },
  . . . 
]
```

По маршруту **GET http://localhost:8080/failed/**, он возвращает все обвалившиеся запросы:
```
[
  {
    "slave_port": Number, 
    "response_status": Number,
    "project_id": Number, 
    "version": Number, 
    "data": String
  },
  . . . 
]
```
Как только запрос после повторной отправки выполнился успешно, он должен быть удален из коллекции failed. 

## Slave
Второй микросервис (slave) принимает и сохраняет мета-данные от первого (для реализации взаимодействия можно использовать любой Java REST клиент).
Он должен при старте, принимать переменную для указания порта на котором работать (каким способом, на ваше усмотрение).

Нужна возможность запустить несколько экземпляров этого микросервиса на разных портах.

По маршруту **POST http://localhost:{port}/projects/{id}/**, он получает проект, в виде json:
```
{
  "version": Number,
  "data": String 
}
```
Если проект не существует он сохраняет его у себя в памяти, или обновляет если проект уже был добавлен.

По маршруту **GET http://localhost:{port}/projects/**, он возвращает все имеющиеся проекты:
```
[
  {
    "id": Number, 
    "version": Number, 
    "data": String
  },
  . . . 
]
```

## Основные требования
1. Если нет активных запросов, список проектов мастера должен быть идентичен списку проектов всех слейвов. Такое состояние понимаем под конечным результатом.
2. На конечный результат не должно влиять добавление в POST метод слейва конструкции: `if (Math.random() > 0.2) throw new Exception();`
3. На конечный результат не должно влиять добавление в POST метод слейва конструкции: `Thread.sleep((long) (Math.random() * 10000));`

Выбор технологий полностью на ваше усмотрение.

Для облегчения процесса сборки приветствуется использование Maven или Gradle.



